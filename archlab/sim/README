/***********************************************************************
 * Y86-64 工具（学生分发版）
 *
 * 版权所有 (c) 2002, 2010, 2015, R. Bryant 和 D. O'Hallaron,
 * 保留所有权利。未经许可，不得使用、修改或复制。
 ***********************************************************************/ 

本目录包含 Y86-64 工具的学生分发版。
它是主分发版的一个适当子集，去除了主分发版中的解决方案文件。

yas		Y86-64 汇编器
yis		Y86-64 指令（ISA）模拟器
hcl2c		HCL 到 C 转换器
hcl2v		HCL 到 Verilog 转换器
ssim		SEQ 模拟器
ssim+		SEQ+ 模拟器
psim		PIPE 模拟器

*************************
1. 构建 Y86-64 工具
*************************

Y86-64 模拟器可以配置为支持 TTY 和 GUI 接口。
运行在 TTY 模式下的模拟器会在终端上打印其运行时行为的所有信息。
虽然更难理解其运行情况，但它对自动化测试很有用，并且不需要任何特殊的安装功能。
运行在 GUI 模式下的模拟器使用一个高级图形用户界面。
这种模式适合可视化和调试，但需要在系统上安装 Tcl/Tk。

要构建 Y86-64 工具，请执行以下步骤：

注意：如果您的讲师已为您准备好此分发版，则可以跳过步骤 1，直接进行步骤 2。
Makefile 已经为您的系统设置了 GUIMODE、TKLIBS 和 TKINC 的正确值。

步骤 1. 决定您希望构建 TTY 或 GUI 形式的模拟器，
然后修改 ./Makefile 在此目录中相应地进行调整。（您在本 Makefile 中所做的变量更改将覆盖 seq 和 pipe 目录中已分配的值。）

构建 GUI 模拟器：如果您在系统上安装了 Tcl/Tk，则可以通过初始化 GUIMODE、TKLIBS 和 TKINC 变量来构建 GUI 形式，以适应您的系统。（默认值适用于 Linux 系统。）

分配 GUIMODE=-DHAS_GUI 会导致模拟器源代码中包含必要的 GUI 支持代码。
TKLIBS 变量告诉 gcc 在哪里查找 libtcl.so 和 libtk.so 库。
TKINC 变量告诉 gcc 在哪里找到 tcl.h 和 tk.h 头文件。

构建 TTY 模拟器：如果您在系统上没有安装 Tcl/Tk，则通过在 Makefile 中注释掉所有三个变量（GUIMODE、TKLIBS 和 TKINC）来构建 TTY 形式。

步骤 2：一旦您修改了 Makefile 来构建 GUI 或 TTY 形式，您就可以通过输入以下命令构建整个 Y86-64 工具集：

	unix> make clean; make

********
2. 文件
********

Makefile
	构建 Y86-64 工具

README
	此文件

misc/	
	源文件，用于 Y86-64 汇编器 yas、Y86-64 指令模拟器 yis 和用于处理器模拟器 -t 选项的 isa.c 文件，以检查结果是否符合 ISA 模拟。
也包含 hcl2c 和 hcl2v 程序的文件

seq/	
	SEQ 和 SEQ+ 模拟器的代码。包含用于实验室和家庭作业问题的 HCL 文件，这些问题涉及修改 SEQ。

pipe/	
	PIPE 模拟器的代码。包含用于实验室和家庭作业问题的 HCL 文件，这些问题涉及修改 PIPE。

y86-code/
	来自 CS:APP 的示例 .ys 文件和用于开展自动化基准测试的脚本。

ptest/
	用于测试处理器设计的自动化回归测试脚本。

verilog/
	从 HCL 代码生成 Verilog 设计的系统。



/***********************************************************************
 * Y86-64 Tools (Student Distribution)
 *
 * Copyright (c) 2002, 2010, 2015, R. Bryant and D. O'Hallaron,
 * All rights reserved. May not be used, modified, or copied
 * without permission.
 ***********************************************************************/ 

This directory contains the student distribution of the Y86-64 tools.  It
is a proper subset of the master distribution, minus the solution
files found in the master distribution.

yas		Y86-64 assembler
yis		Y86-64 instruction (ISA) simulator 
hcl2c		HCL to C translator
hcl2v		HCL to Verilog translator
ssim		SEQ simulator
ssim+		SEQ+ simulator
psim		PIPE simulator

*************************
1. Building the Y86-64 tools
*************************

The Y86-64 simulators can be configured to support TTY and GUI
interfaces. A simulator running in TTY mode prints all information
about its run-time behavior on the terminal.  It's harder to understand what's
going on, but useful for automated testing, and doesn't require any
special installation features.  A simulator running in GUI mode uses a
fancy graphical user interface.  Nice for visualizing and debugging,
but requires installation of Tcl/Tk on your system.

To build the Y86-64 tools, perform the following steps:

NOTE: If your instructor prepared this distribution for you, then you
can skip Step 1 and proceed directly to Step 2. The Makefile will
already have the proper values for GUIMODE, TKLIBS, and TKINC for your
system.

Step 1. Decide whether you want the TTY or GUI form of the simulators,
and then modify ./Makefile in this directory accordingly. (The changes
you make to the variables in this Makefile will override the values
already assigned in the Makefiles in the seq and pipe directories.)

Building the GUI simulators: If you have Tcl/Tk installed on your
system, then you can build the GUI form by initializing the GUIMODE,
TKLIBS, and TKINC variables, as appropriate for your system. (The
default values work for Linux systems.) 

Assigning GUIMODE=-DHAS_GUI causes the necessary GUI support code in
the simulator sources to be included.  The TKLIBS variable tells gcc
where to look for the libtcl.so and libtk.so libraries. And the TKINC
variable tells gcc where to find the tcl.h and tk.h header files.

Building the TTY simulators: If you don't have Tcl/Tk installed on
your system, then build the TTY form by commenting out all three of
these variables (GUIMODE, TKLIBS, and TKINC) in the Makefile.

Step 2: Once you've modified the Makefile to build either the GUI or
TTY form, then you can construct the entire set of Y86-64 tools by typing 

	unix> make clean; make

********
2. Files
********

Makefile
	Builds the Y86-64 tools

README
	This file

misc/	
	Source files for the Y86-64 assembler yas, the Y86-64 instruction
	simulator yis, and the isa.c file that is used by the -t option
	of the processor simulators to check the results against the
	ISA simulation.  Also contains files for the programs
	hcl2c and hcl2v

seq/	
	Code for the SEQ and SEQ+ simulators.  Contains HCL files for
	labs and homework problems that involve modifying SEQ.

pipe/	
	Code for the PIPE simulator.  Contains HCL files for labs and
	homework problems that involve modifying PIPE.

y86-code/
	Example .ys files from CS:APP and scripts for conducting
	automated benchmark teseting of the new processor designs.

ptest/
	Automated regression testing scripts for testing processor designs.

verilog/
	System for producing Verilog designs from HCL code
